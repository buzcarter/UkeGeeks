{% macro MakeRowHtml(song) %}
{##
/**
 * Convert a Song object to custom HTML
 */
##}
<a href="{{ song.Uri }}">
  <strong class="songTitle">{{ song.Title }}</strong>

  {% if song.Artist %}
     <em class="songArtist">{{ song.Artist }}</em>
  {% endif %}

  {% if not song.HasInfo %}
     <em class="songIncomplete">(incomplete)</em>
  {% endif %}

  {% if song.Subtitle %}
    <p><em class="songSubtitle">{{ song.Subtitle }}</em></p>
  {% endif %}

  {% if song.Album %}
    <p><em class="songAlbum">{{ song.Album }}</em></p>
  {% endif %}
</a>
{% endmacro %}
{% macro SayHello() %}
{% set greetings = ["Aloha", "Bonjour", "Ciao", "Greetin's", "Guten Tag", "Hallo", "¡Hola", "Howdy", "Hej", "Konnichiwa", "Mabuhay", "Nǐ hǎo", "Whassup", "Yo"] %}
{{ greetings[Math.floor(Math.rand() * greetings.length)] }}
{% endmacro %}
{##

/* ------------------------------------------------
 * HTML begins below (tip: keep this area clean)
 * ------------------------------------------------*/
##}
<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>{{ PageTitle }}</title>
  <meta name="generator" content="{{ PoweredBy }}" />
  <link rel="stylesheet" href="{{ StaticsPrefix }}css/ugsEditorPlus.min.css" title="ugsEditorCss" />
  <link rel="stylesheet" href="{{ StaticsPrefix }}css/ugsphp.css" />
  <link rel="stylesheet" href="{{ StaticsPrefix }}css/ugsEditorPlus.typeahead.css" />
</head>
<body class="songListPage">
  <!-- salt=song-list-detailed-LmAr17-2828 -->
  <section class="contentWrap">
    {% if SiteUser.IsAuthenticated %}
      <aside style="float:right;">
        <em style="font-size:.8em; padding-right:1.5em; color:#BCB59C;">
          {{ SayHello() }}, {{ SiteUser.DisplayName }}!
          (<a href="{{ LogoutUri }}">Logout</a>)
        </em>

      </aside>
    {% endif %}
    {% if IsNewAllowed %}
       <input type="button" id="openNewDlgBtn" class="baseBtn blueBtn" value="New Song" title="Start editing a new song" />
    {% endif %}
  <h2>{{ SubHeadline }}</h2>
  <h1>{{ Headline }}</h1>
  <p>{{ SongList.length }} Songs.
    <label for="quickSearch">Quick search:</label> <input class="quickSearch" id="quickSearch" autocomplete="off" type="text" /></p>
  <ol class="songList">
    {% for song in SongList %}
      <li>{{ MakeRowHtml(song) }}</li>
    {% endfor %}
  </ol>
  </section>
  <script type="text/javascript" src="{{ StaticsPrefix }}js/jquery-1.9.1.min.js"></script>
  <script type="text/javascript" src="{{ StaticsPrefix }}js/ugsEditorPlus.min.js"></script>
  {% if IsNewAllowed  %}
    <section class="overlay" style="top:100px; right:40%; display:none;" id="newSongForm">
      <hgroup>
        <h3>Add Song</h3>
      </hgroup>
      <div><a title="close this" href="#close" id="hideNewSongBtn" class="closeBtn">Close</a>
        <p id="loadingSpinner"><img src="{{ StaticsPrefix }}img/editor/busy.gif" /> Saving&hellip;</p>
        <p class="errorMessage" style="display:none;"></p>
        <label for="songTitle">Title</label>
        <input type="text" name="songTitle" id="songTitle" value="" />
        <label for="songArtist">Artist</label>
        <input type="text" name="songArtist" id="songArtist" value="" />
        <input type="button" id="newSongBtn" class="baseBtn blueBtn" value="Continue" title="Save &amp; continue editing" />
      </div>
    </section>
    <script type="text/javascript">
    ugsEditorPlus.newSong.init("{{ EditAjaxUri }}");
    </script>
  {% endif %}>
<script type="text/javascript" src="{{ StaticsPrefix }}js/bootstrap-typeahead.min.js"></script>
<script type="text/javascript">
var qkSrch = ugsEditorPlus.typeahead();
qkSrch.initialize();
</script>
</body>
</html>
